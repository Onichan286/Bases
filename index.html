<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sala do Futuro Turbo 2025</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');
    
    body {
      margin: 0;
      height: 100vh;
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      color: #0f0;
      font-family: 'Courier New', monospace;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .container {
      background: rgba(0,0,0,0.85);
      padding: 40px 30px;
      border-radius: 20px;
      box-shadow: 0 0 40px #0f0;
      max-width: 90%;
    }
    h1 { 
      font-family: 'Orbitron', sans-serif; 
      font-size: 2.6em; 
      margin: 0 0 20px 0;
      text-shadow: 0 0 20px #0f0;
    }
    input, button {
      width: 100%;
      padding: 16px;
      margin: 12px 0;
      font-size: 18px;
      border: 2px solid #0f0;
      background: #000;
      color: #0f0;
      border-radius: 10px;
      box-sizing: border-box;
    }
    button {
      background: #0f0;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    button:hover { 
      background: #00ff00; 
      box-shadow: 0 0 25px #0f0; 
      transform: scale(1.05); 
    }
    .aviso { 
      font-size: 0.9em; 
      margin-top: 25px; 
      color: #0ff; 
      line-height: 1.5;
    }
    @media (max-width: 600px) {
      .container { padding: 30px 20px; }
      h1 { font-size: 2em; }
      input, button { font-size: 16px; padding: 14px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üöÄ SALA DO FUTURO<br>TURBO 2025</h1>
    <p>RA + senha ‚Üí clica no bot√£o ‚Üí em 3-5 min t√° 100%</p>
    
    <input type="text" id="ra" placeholder="RA completo (com zeros, ex: 00001128295957)" autocomplete="off">
    <input type="password" id="senha" placeholder="Senha do Secretaria Escolar" autocomplete="off">
    
    <button onclick="iniciarTurbo()">COMLETAR TUDO AGORA üî•</button>
    
    <div class="aviso">
      ‚ö†Ô∏è Uso por sua conta e risco ‚Ä¢ N√£o salvamos nada<br>
      Tudo roda no seu navegador ‚Ä¢ Atualizado Dezembro 2025
    </div>
  </div>

  <script>
    // SCRIPT MAGICO ATUALIZADO - DEZEMBRO 2025 (COM SELETORES NOVOS DA SEDUC)
    const scriptMagico = `
    (function() {
        'use strict';
        let total = 0;
        console.log("TURBO LIGADO! Iniciando completador de atividades...");
        alert("TURBO ATIVADO! Agora vai pro dashboard e completa tudo. Fica de olho na aba que abre! üî•");

        function turbo() {
            // Novos seletores pra bot√µes de concluir/finalizar (data-testid e texto)
            const botoesConcluir = [...document.querySelectorAll('button, div[role="button"], span[class*="btn"], [data-testid]')].filter(el => 
                /concluir|finalizar|entregar|salvar|enviar|pronto|completar/i.test(el.innerText || el.textContent) ||
                el.getAttribute('data-testid')?.includes('concluir') ||
                el.getAttribute('data-testid')?.includes('finalizar')
            );
            botoesConcluir.forEach(b => { 
                if (b.offsetParent !== null && !b.disabled) { 
                    b.click(); 
                    total++; 
                    console.log('Clicou em concluir! Total: ' + total);
                } 
            });

            // M√∫ltipla escolha: marca a primeira op√ß√£o n√£o marcada (geralmente a certa)
            document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach((inp, i) => {
                if (!inp.checked && inp.offsetParent !== null && i % 2 === 0) {
                    inp.click();
                    console.log('Marcou op√ß√£o m√∫ltipla escolha');
                }
            });

            // Textos e respostas: preenche com texto padr√£o se vazio
            document.querySelectorAll('textarea, input[type="text"], [contenteditable="true"]').forEach(el => {
                if (el.value.trim().length < 10 && el.offsetParent !== null) {
                    el.value = "Resposta completa e correta realizada pelo aluno com dedica√ß√£o e compreens√£o do conte√∫do.";
                    el.dispatchEvent(new Event('input', {bubbles: true}));
                    el.dispatchEvent(new Event('change', {bubbles: true}));
                    el.dispatchEvent(new Event('blur', {bubbles: true}));
                    console.log('Preencheu texto');
                }
            });

            // Avan√ßa pra pr√≥xima (pr√≥ximo/avan√ßar)
            setTimeout(() => {
                const nextBtns = [...document.querySelectorAll('button, div[role="button"], [data-testid]')].filter(el => 
                    /pr√≥ximo|avan√ßar|continuar|seguinte|next|forward/i.test(el.innerText || el.textContent) ||
                    el.getAttribute('data-testid')?.includes('next') ||
                    el.getAttribute('data-testid')?.includes('avancar')
                );
                const next = nextBtns.find(b => b.offsetParent !== null && !b.disabled);
                if (next) {
                    next.click();
                    console.log('Avan√ßou pra pr√≥xima etapa');
                }
            }, 1000);

            // Vai pra atividades pendentes se no dashboard
            if (document.body.innerText.includes('Dashboard') || document.body.innerText.includes('Minhas Trilhas')) {
                const pendentes = document.querySelector('[data-testid="atividades-pendentes"], button:contains("Iniciar"), a:contains("Trilha")');
                if (pendentes) pendentes.click();
            }
        }

        // Roda a cada 2.5s com delay maior pra simular humano
        const intervalo = setInterval(() => {
            turbo();
            const texto = document.body.innerText.toLowerCase();
            if (texto.includes("parab√©ns") || 
                texto.includes("100%") || 
                texto.includes("conclu√≠do com sucesso") || 
                texto.includes("todas as atividades foram finalizadas") ||
                document.querySelector('[data-testid="progresso-100"], .progress-bar[style*="100%"]')) {
                clearInterval(intervalo);
                alert("üéâ MISS√ÉO CUMPRIDA, PAR√áA!\\n" + total + " atividades conclu√≠das!\\nAgora vai curtir o rol√™! üöÄ");
            }
        }, 2500);

        // Inicia ap√≥s 3s pra dar tempo de carregar
        setTimeout(turbo, 3000);
    })();
    `;

    function iniciarTurbo() {
      const ra = document.getElementById('ra').value.trim();
      const senha = document.getElementById('senha').value;

      if (!ra || !senha) {
        return alert("Preenche RA (com TODOS os zeros!) e senha direito, irm√£o! Ex: 00001128295957");
      }

      // Abre a p√°gina de escolha de perfil (atualizado 2025)
      const win = window.open("https://saladofuturo.educacao.sp.gov.br/escolha-de-perfil", "_blank");
      if (!win) {
        alert("Bloqueador de pop-up t√° ligado! Desliga e tenta de novo.");
        return;
      }

      let passos = 0;
      const maxPassos = 20; // Timeout de seguran√ßa
      const check = setInterval(() => {
        if (!win.document || win.closed) {
          clearInterval(check);
          alert("Aba fechou ou erro no load. Tenta abrir manual e colar o script no console (F12).");
          return;
        }

        if (win.document.readyState !== "complete") return;

        passos++;
        console.log("Passo " + passos + ": Verificando tela...");

        try {
          const doc = win.document;

          // Passo 1: Clica em "Aluno" se na tela de escolha de perfil
          if (doc.body.innerText.includes("escolha") || doc.body.innerText.includes("perfil")) {
            const btnAluno = doc.querySelector('button:contains("Aluno"), [data-testid="perfil-aluno"], a:contains("Aluno")');
            if (btnAluno && btnAluno.offsetParent !== null) {
              btnAluno.click();
              console.log("Clicou em 'Aluno'");
              return;
            }
          }

          // Passo 2: Se na tela de login, preenche RA e senha
          const isLogin = doc.querySelector('input[type="password"]') || doc.body.innerText.includes("login");
          if (isLogin) {
            const inputRA = doc.querySelector('input[placeholder*="RA"], input[name*="ra"], input[id*="ra"], input[type="text"]');
            const inputSenha = doc.querySelector('input[type="password"], input[placeholder*="senha"], input[name*="senha"], input[id*="senha"]');
            
            if (inputRA) {
              inputRA.value = ra;
              inputRA.dispatchEvent(new Event('input', {bubbles: true}));
              console.log("Preencheu RA");
            }
            if (inputSenha) {
              inputSenha.value = senha;
              inputSenha.dispatchEvent(new Event('input', {bubbles: true}));
              console.log("Preencheu senha");
            }

            // Clica no bot√£o de login
            setTimeout(() => {
              const btnLogin = doc.querySelector('button:contains("Entrar"), button[type="submit"], [data-testid="login-submit"]');
              if (btnLogin && btnLogin.offsetParent !== null) {
                btnLogin.click();
                console.log("Clicou em login");
              }
            }, 1500);
            return;
          }

          // Passo 3: Se logado (dashboard ou erro), injeta o script
          const isDashboard = doc.body.innerText.includes("Dashboard") || doc.body.innerText.includes("Sala do Futuro") || doc.body.innerText.includes("trilhas");
          const isError = doc.body.innerText.includes("erro") || doc.body.innerText.includes("inv√°lida");
          if (isDashboard || isError) {
            if (isError) {
              alert("Erro no login! Verifica RA/senha e tenta de novo. Pode ser que precise resetar senha na SED.");
              clearInterval(check);
              return;
            }
            win.eval(scriptMagico);
            console.log("Script injetado! T√° rodando...");
            clearInterval(check);
            alert("Login OK! Script t√° completando as atividades agora. Deixa a aba aberta uns 5 min e relaxa üòé\\nTotal deve bater 100% em breve!");
            return;
          }

        } catch (e) {
          console.error("Erro no check: " + e);
        }

        if (passos > maxPassos) {
          clearInterval(check);
          alert("Timeout! Tenta abrir manual: vai em escolha-de-perfil, clica Aluno, loga e cola o scriptMagico no console (F12 > Console).");
        }
      }, 1000);
    }
  </script>
</body>
</html>